<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Nick Seedorff and Grant Brown" />

<meta name="date" content="2019-12-02" />

<title>Introduction to totalvis</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#header {
text-align: center;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; }  code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Introduction to totalvis</h1>
<h4 class="author">Nick Seedorff and Grant Brown</h4>
<h4 class="date">2019-12-02</h4>


<div id="TOC">
<ul>
<li><a href="#introduction"><span class="toc-section-number">1</span> Introduction</a><ul>
<li><a href="#installation-and-packages"><span class="toc-section-number">1.1</span> Installation and packages</a></li>
<li><a href="#problem-statement"><span class="toc-section-number">1.2</span> Problem statement</a></li>
</ul></li>
<li><a href="#simulated-examples"><span class="toc-section-number">2</span> Simulated examples</a><ul>
<li><a href="#total-effect"><span class="toc-section-number">2.1</span> Total effect</a></li>
<li><a href="#correlated-features-with-different-effects"><span class="toc-section-number">2.2</span> Correlated features with different effects</a></li>
<li><a href="#correlated-feature-with-no-effect-on-the-outcome"><span class="toc-section-number">2.3</span> Correlated feature with no effect on the outcome</a></li>
</ul></li>
<li><a href="#communities-and-crimes-example"><span class="toc-section-number">3</span> Communities and Crimes Example</a><ul>
<li><a href="#feature-importance-and-correlation"><span class="toc-section-number">3.1</span> Feature importance and correlation</a></li>
<li><a href="#totalvis-plots"><span class="toc-section-number">3.2</span> totalvis plots</a></li>
<li><a href="#additional-functionality"><span class="toc-section-number">3.3</span> Additional functionality</a></li>
</ul></li>
</ul>
</div>

<div id="introduction" class="section level1">
<h1><span class="header-section-number">1</span> Introduction</h1>
<p><code>totalvis</code> is a model agnostic vizualization tool used to summarize complex relationships in black-box models. The package relies on a PCA based transformation of the training data to group correlated features and display their total effect on the response. At a high level, the method generates partial dependence plots (PDPs) for the principal components and provides interpretable insight into the importance of the features. This vignette demonstrates base usage of ‘totalvis’ by reproducing all figures used in the associated paper, as well as introducing a few additional components.</p>
<div id="installation-and-packages" class="section level2">
<h2><span class="header-section-number">1.1</span> Installation and packages</h2>
<p>Install <code>totalvis</code>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co">#devtools::install_github(&quot;nickseedorff/totalvis&quot;, </span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="co">#                       auth = &quot;8d5a20d386acf526450bff89472f1f4b7482444e&quot;, </span></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="co">#                       build_vignettes = T)</span></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="co">#devtools::install_github(&quot;nickseedorff/totalvis&quot;)</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="kw">library</span>(totalvis)</span></code></pre></div>
<p>The vignette uses the following packages:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">library</span>(MASS)</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="kw">library</span>(randomForest)</span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="kw">library</span>(MachineShop)</span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="kw">library</span>(gbm)</span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="kw">library</span>(nnet)</span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="kw">library</span>(caret)</span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="kw">library</span>(kknn)</span></code></pre></div>
</div>
<div id="problem-statement" class="section level2">
<h2><span class="header-section-number">1.2</span> Problem statement</h2>
<p>PDPs and individual conditional expectation (ICE) curves serve as powerful tools to study relationships in black-box models. A primary limitation of these methods is the assumption of low dependence between the covariate(s) of interest and the complement set. For both approaches, the procedure may generate observations that are far outside of the joint distribution of the training data when features are correlated. An instance of this can be referenced below, where the red indicates the data points that would be used to calculate predictions when setting X1 = 1.5 (done when assessing the marginal effect of X1). Additionally, PDPs and ICE curves are limited to low-dimensional views and may miss complex relationships. <code>totalvis</code> looks to mitigate these issues by grouping correlated features and interpreting their effect as a whole.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw">set.seed</span>(<span class="dv">2021</span>)</span>
<span id="cb3-2"><a href="#cb3-2"></a>X &lt;-<span class="st"> </span>MASS<span class="op">::</span><span class="kw">mvrnorm</span>(<span class="dt">n =</span> <span class="dv">500</span>, <span class="dt">mu =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">2</span>), </span>
<span id="cb3-3"><a href="#cb3-3"></a>                   <span class="dt">Sigma =</span> <span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="fl">0.9</span>, <span class="fl">0.9</span>, <span class="dv">1</span>), <span class="dt">nrow =</span> <span class="dv">2</span>))</span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="kw">colnames</span>(X) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;X1&quot;</span>, <span class="st">&quot;X2&quot;</span>)</span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="kw">plot</span>(X)</span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="kw">points</span>(<span class="kw">rep</span>(<span class="fl">1.5</span>, <span class="dv">500</span>), X[, <span class="dv">2</span>], <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
</div>
<div id="simulated-examples" class="section level1">
<h1><span class="header-section-number">2</span> Simulated examples</h1>
<p>Through three simulated examples we display several characteristics of <code>totalvis</code>. The first example addresses the concept of a ‘total effect’, while the following simulations demonstrate the use of the <code>partial_effects</code> plot as a diagnostic tool.</p>
<div id="total-effect" class="section level2">
<h2><span class="header-section-number">2.1</span> Total effect</h2>
<p>This example demonstates the ‘total effect’ notion of <code>totalvis</code> plots. Marginally, the covariates affect the outcome in piece-wise linear fashions in separate locations of their support. <code>totalvis</code> looks to group the features based on their positive correlation and describe the total impact they have on the response.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="co">## Generate data</span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="kw">set.seed</span>(<span class="dv">2021</span>)</span>
<span id="cb4-3"><a href="#cb4-3"></a>X &lt;-<span class="st"> </span><span class="kw">mvrnorm</span>(<span class="dt">n =</span> <span class="dv">1000</span>, <span class="dt">mu =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="fl">1.2</span>), </span>
<span id="cb4-4"><a href="#cb4-4"></a>                         <span class="dt">Sigma =</span> <span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="dv">1</span>), <span class="dt">nrow =</span> <span class="dv">2</span>))</span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="kw">colnames</span>(X) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;X1&quot;</span>, <span class="st">&quot;X2&quot;</span>)</span>
<span id="cb4-6"><a href="#cb4-6"></a>X_new &lt;-<span class="st"> </span><span class="kw">cbind</span>(X[, <span class="dv">1</span>], <span class="kw">as.numeric</span>(X[, <span class="dv">1</span>] <span class="op">&gt;</span><span class="st"> </span><span class="fl">0.5</span>), </span>
<span id="cb4-7"><a href="#cb4-7"></a>               <span class="kw">as.numeric</span>(X[, <span class="dv">2</span>] <span class="op">&lt;</span><span class="st"> </span><span class="fl">0.5</span>), X[, <span class="dv">2</span>])</span>
<span id="cb4-8"><a href="#cb4-8"></a></span>
<span id="cb4-9"><a href="#cb4-9"></a><span class="co">## Covariates have piece-wise linear behavior</span></span>
<span id="cb4-10"><a href="#cb4-10"></a>y =<span class="st"> </span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>X_new[, <span class="dv">1</span>] <span class="op">*</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">-</span><span class="st"> </span>X_new[, <span class="dv">2</span>]) <span class="op">+</span><span class="st"> </span>X_new[, <span class="dv">2</span>] <span class="op">+</span><span class="st"> </span>X_new[, <span class="dv">3</span>] <span class="op">+</span><span class="st"> </span></span>
<span id="cb4-11"><a href="#cb4-11"></a><span class="st">  </span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>X_new[, <span class="dv">4</span>] <span class="op">*</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">-</span><span class="st"> </span>X_new[, <span class="dv">3</span>]) <span class="op">+</span><span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">1000</span>, <span class="dv">0</span>, <span class="fl">0.2</span>)</span>
<span id="cb4-12"><a href="#cb4-12"></a></span>
<span id="cb4-13"><a href="#cb4-13"></a><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))</span>
<span id="cb4-14"><a href="#cb4-14"></a><span class="kw">plot</span>(X[, <span class="dv">1</span>], y, <span class="dt">xlab =</span> <span class="st">&quot;X1&quot;</span>)</span>
<span id="cb4-15"><a href="#cb4-15"></a><span class="kw">plot</span>(X[, <span class="dv">2</span>], y, <span class="dt">xlab =</span> <span class="st">&quot;X2&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAnAAAAGwCAMAAAAezai4AAAATlBMVEUAAAAAADoAAGYAOjoAOpAAZrY6AAA6ADo6AGY6kNtmAABmkJBmtv+QOgCQZgCQ2/+2ZgC2///bkDrb/7bb////tmb/25D//7b//9v///9sG8dBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAgAElEQVR4nO2di2LbuI6GObNtzzY72Wa8TRO+/4tubAkXXkVSJERZ+GfqxrYEkvBHEKBS2ViVSlDm6A6oriUFTiUqBU4lKgVOJSoFTiUqBU4lKgVOJSoFTiUqBU4lKgVOJSoFTiUqBU4lKgVOJSoFTiUqBU4lKgVOJSoFTiUqBU4lKgVOJSoFTiUqBU4lKgVOJSoFTiUqBU4lKgVOJSoFTiUqBU4lKgVOJSoFTiUqBU4lKgVOJSoFTiUqBU4lKgVOJSoFTiUqBU4lKgVOJSoFTiUqBU4lKgVOJSoFTiUqBU4lKgVOJSoFTiUqBU4lKgVOJSoFTiUqBU4lKgVOJSoFTiUqBU4lKgVOJSoFTiUqBU4lKgVOJSoFTiUqBU4lKgVOJSoFTiUqBU4lKgVOJSoFTiUqBU4lKgVOJSoFTiUqBU4lKgVOJSoFTiUqBU4lKgVOJSoFTiUqBU4lKgVOJSoFTiUqBU4lKgVOJSoFTiWqzsCZ06uvP9RvwUg7O66vOXkdBdwxzfaTAtcoBa5Ng4D7fF3i59//djE3ocYMQP1Wf+BdN/Nz+eEdfthlbkYNGYD6reFAe5+n6K7bt9+7zU2pEQNQv7Uc+KWPl3/gx/fE4nAdx1VI/dZyoD35TC2s3DXCVQm9OiqHW6fq+XIRY8s6NyiHO63f8iKvDqpSP16WaisxT+d1XLFXxgzgtH7Li3lV9+FcHQzcrM3u1HHA1V/hENakwE3vt7w0wqV1aA43bbN7NTyHkzbXUQdWqfM2u1tjq1RIfTMXac7qONSYfTj1W/2Bd32+Ji8GtpibUUMGoH5rOPChz9fvPc1NqFEX79VvtQcuejf/ZN+/juPqpH6rPvAQc/LSoqFNFwGu/waWAlcn+ASuAVzp5lqlyQN0VuDwE7gEcJVzq8KmuE4KHH0CCtwum+JS4Hb1QEgK3NG6GHCawx2ua+VwWqUer2tVqUWqg1KBK1Ho0+cDrjWYVS67ClyBIr/B93TAtaZrtYWFAretB2wecc8GXHNBqsD1V8ynClzjiQrcthS4rTM1h+uqKyypO7bctErtrisUDQO23OLNSDQyTbOteuptEdl/Q6fA5ZT+LJ4HuAGXr7aaO0DnAC7zWTwBcMtsGnGBPtuqWEszNFsn8/hM4l09P3ArbQrcPIpVp/hesZFevelsDkBb/xbL4xS4tJba9MmBw7xB6CNR4NJ64PbsEc7W/wJMh3bFdQbgjIltwMGbxVa69aezOZafcuzYu0OkwMW1dZ+n0wNnGFPLwsqHOm6NVeCiWhz+xMC5q+iaq9JT07OtSMPimhw4AxWDFd4WeTPm++NLLlI3LhgDnLMn9xjzsBA35pMX89sgLS5fApwkcPd7cL+Z7/cbUA2+ObIPnPvoBjzLCgv/dxiqU70hn7yc34YIQFsf48cUG6to+HH79/e/flmB2797IcwJcBTkvHf9uNcQB0d88pJ+GyDj/Zc4qNhauR5fcLF8tYX3BRcD7lXLbTmmjf9uuEls3Nermm3p64ZE/dZd1MVcR08f4VZzJhK4gu1HDzjronY8cCeOcASaySfOg3M49t0qO8xtipdFfsaWinCsgp0FOHG/ddOyG2XYEiMLnHC1BUukbzn6ghsK/WBX2WZvnbRKXSc8VgyZfg4CTtZcAjge4L3qFJMMY53Xa9sU17TAlWVwzwAcY8edWutkgyvJQYsNYc07+wDNChxnLdvH0wO3xC/8AUvUZfx2faAUj5/q1rf17R6gSYFj2uji2YGjFdLdADFYN+EFLpfI0MwERcO0zeZlTDlxpwcOV01udHkBrqwScCmuGspUBQ7lJm8ba8XJgTNYjzswQTQD8Nb3kr9rr8A1CmMaIYfVW+KMYtMdutfdHIQwv2KgTUigkX7NPuYOBa5NVJ2iv+FDyZxSbLunugGH8StcU413DHIVRn3N4VpkOHK4qtinBm4tRl2MnOyVRS+2SeRXEFqlNgiylKBgeFrgIDJhQQovYkQzhgPnHJSbiib370B6DqBW0wFHqNFq+sw5XCSQ8RXWWMcFfHnNzUVK+DJNH6KpgLO0+USX7J+6SnWiFzwiT/wfq1KKUQAcOyDZTwXuLnc9Lene6YBzJlAaOPhNkXXq4exjRUbaQwpciSDtMHwae29Hzio2v7d/fcx5kPjLpfMTVk6sPLW0AGz8GrQClxdO23iAS83mkwEXrINsHjlVqqXawakTiLVctqE53KZwHaHdzsTaEzuvuIFu6gWc9zbf6LCWAba8QrVEiSGtUjPC69TxBO4awHFI2L4Q5XCU0m0AV9oTcc0DHCctTD+eBbhkarC+B8sopGhwxd6yuG/w1T1jujZwxtPyonOE/wJ7vayJXR3sZy65zhFJsDeEBcLSoFNVbSyYBf3Yc/LpmvVkPORieD1JlZozyAoCggufw2MH2Nb2jtAUwMEWAMveij36LMCtoY09Wrp0alh445u/7PRqAq8LnL+c1iUnTwWcpfBuGG3rr444MdD4Z9f26LLA+cvp5YDDEVP+Bj8YwMxaa+g1yPBYQVvfpasCF/KGhVnp+Z0PFDZn6A+VDOAFjG7Wwi8yEXLQC//XhYUHUKfjgeN5Cfdl6fndD5Q1RwU5j2iIHLjG8roBF14KjLZqlvYcQKWOBi6IbriolBrofqCsuRUl/pxNQdorYQGN+8hAeExdVh0+gEodDBxfIdZ5W7k4PAFwuGg+nkOIx51fnqDxeh5Pr5+lPQdQqWOBC1ZSx7tlJrofKGzO0JLIlkz4vRA4IgSOkj/DDinn7mLAOfkIMVdf4J8eOFwtnd0Qt3RAjnA/jmYnxDiy4ZsePYAqHdgsdytbJSrXhkHAvf39r/3zw5jHvc72m8tpRclZIjFxwxUWUjWkEHpAQZDZoLeS/RzzyQv6rUZsugbANZnqeeBdD7/959d6T8fd5vKiAOdiRddTl7fcbRFW1cKS6gHn4TduACRRv1UIPTgpcI9bIr99v/8ocSdHiFnWAlGweLpLq7VQT1iqKnge52bA8sAJ+61cceCaOjMIuH/gHo4y96oFi3wfJLbxhhBSwkaXWS1WIKtR9hhpsusAFon7rVSOJ6kj0wD3mKU3uZlqHHD8Cwq4uvpVvaWlmE1it4+yOZyw30plIhVDa1/GAPfx8ve/7A7Je83lRdHN4nLpx34KfC5qAXC+5XSr/QZAEvVbsaI+bQ22g6pU+7706Xsncxk51+lxc8TQD5TLYWZn4RnrB5xQ3OwQyfmtXCbgbUc3RgEnZs6JYCzWk49Y5kaoMQ9alqOU9+yYZOoo4PpEt8VY7wOFzbHwxbGhbQ+alQZKVL6FwtbijTJh0ADqdEwOp8CRHV4iAFHrOy5wEOtwHXVehEyluGvXBm6Hre4HypqD36XEKAeW2frpxDjDwcJLX1aBy7SpwDE7Lk0YrthenMHX4AxK8mAHD4Of5nCRJkPe2pk7P3B8BvLl0fGTk+bZ4HIE4lbuyCsDVzMxQ2u9DxQ1F9kfAuPrCosYGYh61gYRrmGluBBwvn+9a86V1rofKGqOsjFnc3d5lfZBDNAH+Rq+h2WurVwnLgNcJLwpcP6yafBV2jZxLzBY9jLbMgm7laLwKsBFFtTrAscimhPHnFdc1OgyhLP7huDF+hnt6zWAC8Mb31lvstj9QDlzsDj6E5CocrIzfHRfW/5iV1nDbsY6ewXgQufyCdpos/uBYuYABoALr5kCQJYgY8GQw8WWV9yPi7YxZAAtkmzWWydgNu/rw/mBc/1B2DHCDKeSFwlgBzybamPMAFok2CxzpAJHJkzoFeaf8F2GIzGZT9UumsMlr9lfFTin1oS9WwhoLPRFiliKcFDmx8Lb0shlq9ToBN7dhTMDF1SjkQnpY8efWtx7a+jNswMXd+eOagHsdj9wpDkcLo3b58tZCcKkN+4/BS5oJ87b+tYO8E4FHAYjikpYAmT4SmwnrRsojb15buBivLEMrnVZqDlrAuB4UWmx4mSrZnp5DQIhVgqtrrsacLhlubzd3JcTAudPtSRlhhbYyEJr9y0OVwMOqyt4+yrAYWzHRy98eVPSpw2RQ6thXjhqAB10HHDWmak2tk1eZLn7gQPNAShsHcztwjn88Wcrp9gRygvLmbsccOB0s6O0rzlrBuAQCAxzuB2eSnOTIDoXESChi0zbFIPPDFzKZTDdKdQ12O5+4FhzDBMYdvZaAx7g7sjZGHD4v9detK9PDFzCi9j6rgsOpwNuJWj9OZLEZbjjxBleaSWBS7v2aYFLRDdDQc3sWFFPCZw77nSdGsnf+J6dt6UH6+nFgUvPV2i+Mtn17Xc/cKg5nHCWYZMMainfOeENfRebuJcDLjN34X27h7dTAEfDY9cI/M3c1LQMHccfwpbcF01yv+k5gUtNT9gfsP6zavZOABzP8Ck8RVHyMzXnB0uPPItLtAVPUw59SuCy+TAsCM4uXHU2NxS4Pz8SNw6tMefUpQy4IFxl11bwpaWDIyx5K2hsQYWTRn7yXfzWooTrGHCGIWfjHtpoovuB9n6bM+queyfHBnMucLCkGoz1oWdi9Fl+2RXXTkac8ffmbNSdTrHRW139Vq/kXOWZjHWS3UmAs+/mcd/Q3hEOZpZ7zT5fNeRWXic7BJdmgWtcR0rV02/VijjSwlzFvShYVt2PpaaV7gc+9PFyv2Vo6Dg2lmLxj9dQ/pCjLCAsktoZWKJZvyI5XGqbZMwn39Nvlcr4j09HcD2cZWfJ4d7++tVrpjpuNpQ/RCCqF1hdH7yP1P+ERwPX1W91SgKHLodVJuuhzWa6Hwi6mZ/DHIdDTzDnP7NsohpYSh3g1sdN9w3N4R4a6beMkhPSy9p2t9P9QNSfH/81zHHohbSfwucuobChtNgrdisgOS7UjPRbWokEzlDq1qfpgcDZz1czzHHG+GGrQpZHPTAHvi1cJAZm7yP9llRm1q5vd2qn+4Ei5gzuya07QxnuYkuvxXgWrK8U9kYOoFWjmk3MSkNzsldD1Qd+vKRv6j6gXfcsWs8MC0v5FM7ZqmNVh7uMgmcjV/D7DOBIvxWYTc/WYLdyZ0v1B96+mv0p1a57EkShlRHazigS21EyYM3JyHgD/QdwmN+2rUZJY/OZz9OdTbUduNt3Ld3GEIQeSE/LTfCsgxpuK4V7cR0HcJDfCqymnWjJWV3KpeYc7u66xOWXru3yczDHYtuPG2zFJ61zmYYBBmvqwBzuAL9tG005DK40RCdnY1tNB96/oOf+xXeJbyDr2S4/h5Iu2tMohQwWVPSlRXcSYBUFWZPbj/Hbps04apaC3LHA3S8xLx57b5+qDb3GKYfRybKYlQPO8h9ZcoJBzu1VUd/qB3CU37ZNRnBbM2R3GV0duLO12gM/XpLfjz2iXecMgwEew1xakVoVytG1bjDGJ6w8K26oUo/x27bFiN/cBM5iDmeKon++ud4HDjKHc4yvgcHETNHmvLw4Gaax25lij47J3g9oNu4ma9FFdFiPHpwNuMcDQJHffkvxBsAZ5lWBAfSRAHDoE+Nd6rskcIZmmhfTYszR6sCvMGBGvJqRGUAf9W42OieJNcc71wKO9uBYum+tg1M0oCF0PrSe/yrJew7gomW+xazFuEVCeYabbbHzgcPMcX8gLdH4Zp3XLK8XDJ3EKl1b78ynAC7GG9FmcbLi8btrhlMBh3+8YJWIbbQjgmsoK7usZWHPu8I1aAA91Bm4WHijy3v7stxEk90PHGWOpbEAkR/NvFeCDM51LJFmYOZeDLg4b5C71f0yQ3Gb3Q8cZY7zYSH3T5emPKIFqK1/LM7fSwKXmIgWFxNePnRrtPuBPc2BA+AMXjQ4ISyIbyxTY39RWKRFuXEePwNwMd6oOmXJr1M57MvjpgbOHSrVpVRoJsNb4qUw2FGMu1yVGscNHWGYy90O7OnEzMD5y5zBmIbr5RZmzuvujhyuq6Zp0Tg/cClfcceDy732d/TibMDh3yFTfBUNK4oEnNBC9fBOD1xydlqWwwXNXQk45CKWu7Ho5dQJ6Z0TA/lbW1oyN3DxETnxKukWC8tqbCI+NXDuiHn9tEb7yOwMGAy5pD+WOb8Wu6mBi8dsGCMyFZmyDKg4W8+cw4VVKoU4jGXcVw5l8V0mntBhL9ZSpGqQRwOXmx4OKjhylmuEvDG/ueeHi+oTV6mRM+KzM0kYvMzc7oRBbrOuWwcDl5wehicKZg1rljkhuhvCZqHrlu7jnBk4HLmX26/Lau4iQzZ5Q9a4eWzDlM3gY4GLwWAgQ+O7t4BcgSy/jIoGuOGOA+h4YDdzxvvDwaO1cdubfJXFSc5wZsus42/oRtzV0wHn8IUraQo46z2j6LcaI8qcz6DXADoe2MscHzn+zRgrm7YpCK113InbcmDc6Uass7MBB+NwZpApiXB8m5JHfXKTiczDnQPoeGAvc2y9w5SX/GLNpiNjmIXedd0ehLhkIjNDDhdODJybIU8Z3KCgwMnG5rZjuOMA+h340P1fXz5uyHJrvnUoLXg8BBEWJp//FuCHoZI5F2a134ud/ihVud+IBnwjB9kWdsibdeYecdhryGOAu/31y3683G+l0Q6cl/SuuQm5o50z5G11KDy1a8aDmQz2c+Wx2R+lqvGbPxXS6WzRigr+peUUH+30Odzn68/H47ffe4DDCh9Hz50UrVKLaTO0RcIdbIEt93ONze8RwFX5LQSO1scGx7jA4axmkbPPGIcA9/Gy3N/s7dtvz3F8hOXtAgjIDGDRLuDV5Zg3yLsc8cAI4Cr8hp3Clxwn1ToDQz2f3jTROg52YIT70tv3PRFuPZK5dnX56qS2ILe6GEyxqsFr0O/seODK/UbTEBNOBK7OJ5Sq0ARkpZSN+WOPBuVwq7s+Xrp934DDyv4It7rThLEj2dnxwBX7zY1uRFyTV4BTMGmcvK63hlWpy+Lw+doFOOOkJ1TB1yMGuRvg5uRw6fbDHo+qUov8Bo9uTe2Os9wjhtVmhnw7ZpCDgNtnznjhxtB/fA0pdqjznE1obtVk++T3aBRwm8oBVzkJCTVmBjxkoYiyscHvHkDPA/ebC9J2mn5UupY51wbP0B78YAzu8vUawEClcjiaSjXYWQj3aBpcxjDrG+omBC7ImAyisQQlN58rI47V9uhdh9vaIR4LnF+lEoA4XCo1t7xD85CsWOt+EN2GOzNw6FRrLfovXp1SdkcLJEZF77i1FbZONPB2NHDrM+NBgbShwwpgw22R1aTxUKNXug+gx4G7zeE4redJeCU1bd2Kk4jyM51oo7V5ygzA8TBNT9d56SAVcRU/ZM2NLZ1JTcHCO2IAXQ7cbw4iGh1nqIyy1qJzPCcyFxo4IzAoMYCBMsHPEMydFCGxAkTeYz7locybrs8NHPJlw0dkKfQcnYnPecYjOYBxigGHecbynM0/jztKaDH3gBOs53HeSlfvTQkcO4I9spXA2GAK42mQlzitmH5T1OmeuBLA8QHSdKOkNohtrjsZfhHgYq92GUCfA7uZ43mEhSz48SwidppXcg3SBMBh0ua84yR2HDQHLQhqNHkx14012W+0EwPnVpR00c9AvhHljTcwEooZgOP7F8Y5wGHJoYseWM7H6qqIM7suDzMDx49Fymy0aIid1X0VDTp1gOLN8gV1faQyK7KgspzNqej56iA6gD0HdjfnJHOQfGzyNlpTARccYCiz47h5a6u1VGbBaUWN7NB5gKN1NKy+DtAswAXDh3yX4lu0akDGGH7uXpTQAHYfuNuc70LmGJt2nLQmAS6yBBrIz9a5SaW97ztGJDvNr0z6Ong+4EIXGvpjQh300c8BXDoiUcQCkryiFJcKpzwNvN87qZsOOJ694mu4kkaJO0RzNJtZAmEyku+sG9x4wMMT/IAGa+2oAXQ4cKc5qs/9Vwk5t946RnMDRzkZhTNI7fhqChtNYCVYsTE4DhpAhwN3mmNLgX80rqET8DYJcLEExJD7YHpaWkKtk5dg/Iuza9jHMWgA+w/ca87NKfjREy2o0wAXLbGIHRbNeAK3/uRVYqF9wz6OUQPYfeBuczj22G6mj9vlgYu9z64lsMzX4kpLhDEv0iriWus8qScEzjp1Ke1MGkxCnOT3IM0N3Oo8lrTxLXNLWTLEOkvJnb+09B3pnMBRlMNyAWbiJCvq1MBh5gVLIsvj+Nrp+BGuRbiNdHfxpMBRhF8fIesNrwgepEmBczI3wA3rBwpnMJEtbvvi8WPHNitwmOCuT3AKThLgZgOOfIFhCldRWmdxq9cSejR12f/jXDspcJRwPJ5FgLPH8jYZcH6uhesBe5vSOEPQWQ6gxb3OdEuDBrDjwB7m3NQXkot5wpudDDhaJSE28TjmZr4Uv/gjrauYqIwZ4dTALY9sYlrHb4dqUuBojlq7BixYVimLAyssbXEqimsDBy+xldRgVX+c5gSOfqA4x9ITP7tjEc/EzIkNYM+BXczhJMXjwvVUgXNfJnexqoAuTsHCyi4sGPfk0NwATQocbffyExS4rSrVTeZw+WSxje/+0tLqmx2XIQ8C7vN1wSJx06n6zwtX0kl4G9T8br8F2S2WDDyLc/kU1Rjgbma9leM7/LDLnA1rrYNr1EGf1W6/8R00rEVZiW9ZqNu2NkJDgMNbh3658NvvFnMQ+9nxrD49Gra7RvRht9+M9wg7HlQqWLiwEN3cTbzcU0OAg5sjf+m96abSbg7s7iIdvyPy0Ig+dPEbpHCxH4E4dGZ4+sB6gXWx54F2/0yFjIM5jPn7+OX0rtkjnP8jJb4so/PTPYBwoINH5XDrVG3KRbCiD0v9aVbUUTncHr9ZnsM5XoOfaCMErhX6tk8K3P023A8l5mnWnPFGjhMUltTnBW6X35b3nStT+AcLCLASAc64dA7SIOD2mFsiPw0cgOPL6vE6qBebEY49Gj5dXfCiK+p5c7h95mCiGZqPU22ILJofOHoFK1M2icNylNzcsb+JHvY8cL+5YJLhThKGvuN1DuBwK4QFNEpRIicPH9axwCVmU/Aym3yT8DYpcB406zO+D5czkQxuHaPeocAVTymqF2bh7WDg0n5ArKh6wKV0C7hco73GeyRwpeMn2o76mCM6FLhtApaYBj9SsdDKW7cBzw2c8X51cJoF9VjgChznPDJneztvRf58RuDiI2f1Ku4c9e1GuyYHjqanXyt4xgqytqcBjgYcHzlU9LBJOcEvJZGmBg5+0deyPMRY388ZM9Hao4umqFITIzdUnjqbSFPo+BwuUzhgbeqlcsyEzQHnv/MsVar7JA4c7cFNctV+1aHAbcw/SEVwWsNr3EQNcB01M3BULky0HQI6Frg8E0FIS6wkSWafHbjkyHEvZDrepgbOy9fShKV3etO2d2oO4DY2MicMcHMD5/ySUhFhKQPdNQlwqaPw16H7tt5BRwNXGIRKLx6KaWrgVp9OGN8mAG6PWw4s+GcGbmDqul+zf17bRo4ZgQLXKAVuT9s9D+xnToEb1KwCFz9krmtZng4Fbk/6hhcgenWpsv3uB/YyN921BVdHfl47eDm8DpsWOPefGc2nA4HbsSIen6VMA1zwTzoUuFSzvYETDXezABesEgpcstnOwMkmdJMAF3HE+u/vZ9W5czjfotxwZgZu4pLh1FVqeIOH8wN3+xrV4zYZt8St9TaBO7ByL9KYvtX6rUG+Y58CuNtfv+zHy3db7riD3VCvIV2r91u1jp7aQ4Bbbjv1+frtd7njjg309RrRtRa/1SqevOy1Wtt+zwMt3Vjv7dvvVsddErgOftvU0Y4dGOG+9Pa92XFXzOF6+G1TBzt2UA63uuvjJXU/7m1zU9eoo3K4Dn7b1LGOHValLovD52v1vWonBw00qkpt9lupDvbvJPtw7htnIO7QfbidBp4wwj3E7pFcYo7/S8r6xqQ1sIuVfquS51/5cDcPcMvUU+AkgTsg3E0DHFyzaW1MWs8A3BHOng24w3OMUp0UOMe/Ctz98dJV6kNDgeP+fTbg6sxN/tshvk5TpWa3oJos7pIC16izAJdn6rmq1Cpzp6kWVp0EuOncqsA1SoFrkwLXKAWuTdMAd5r9kFUnAW46t84D3Fn2Q1adBbjZ3DoRcOfSaYCbTJMAN9k0LNDJgJvGwXMAN1uiUaBzATePg6cAbrpSqkCnAm4iBytwjVLg2qTANUqBa9MUwE2UYhTrVMBN5OA5gJuniCrWuYCbx8GTAHc+nQy4aaTANUqBa5MC1ygFrk0KXKMUuDYpcI1S4NqkwDVKgWvTYcCdXn39oX4LRjrSjTnzM78zkfKd3BjCnpN3NTzkzJ3mZ35nIilwvczP/M5EUuB6mZ/5nYmkwPUyP/M7E0mB62V+5ncmkgLXy/zM70wkBa6X+ZnfmUgKXC/zM78zkRQ4lWqPFDiVqBQ4lagUOJWoFDiVqBQ4lagUOJWoFDiVqBQ4lagUOJWoFDiVqBQ4lagUOJWoxgL3+WqMSX+lWUTvxvz1K/Hen/+OfmF8ppFbxpp9+/a7pmdHKTHqvKvyZ25+MFm/3dXuu6HAfb5+dftmvpef8f51wntirB8vf8ccmGnk9nVCytrX53UK4BKjzrsqf+bmB5P126Ptdt8NBe7Pj3/s0v1CLd/w+BZ1xNeEjhpKN/Lx8vNuMu7Wj5dTAJcaddZV+TPt1geT9dtywKTALcrOFVcZR7ybn+8ZcpONpBx3+/a/JwAuPeqtybzhr8chuQ8mB9we3wkA91Ye4f785+6ClKNyDkw2cot79aulk+RwKeCyrsqdicp+MAm/rU1PmsM99F5RNSxzLjXzMg5MNfKeSI3vC9K5gcu7Kncmvp35YFJ+u2uf74YD915bM7QAl2nk8zXmm9vXixcHbuODifvtrn2+Gw1cTXxrXlKzjcQ+k0c75wZu75K6+cGkWN7pu1HA3ZZ9nlvdLlw+E045MN/IYjPs3V3hO9PoBhtljUVD+szV/NYHE/MbdGyH78ZGuFtlt/K1fsKByUYWlyXdfu4It7ktkgUu+8Fs+O2u+SLcQ39+VMU3u7GbGV0QVuIAAAH/SURBVHdBppG7W5YPJvXuCZRMMLY2fjPIbHwweb/BEW0aCtwafcv34fIXVeIOzDXylgv9Jwdu+/pTGritDybrt8cBcwKnUvlS4FSiUuBUolLgVKJS4FSiUuBUolLgVKJS4FSiUuBUolLgVKJS4FSiUuBUolLgVKJS4FSiUuBUolLgVKJS4FSiUuBUolLgVKJS4FSiUuBUolLgVKJS4FSiUuBUolLgVKJS4FSiUuBUojoHcH9+LPeyWG/6k7kfvIqL+63+KwyG6BzArbfPW2/6k7kfvMoV+a3+KwzG6CTAPW6AvN5YO3c/eJUn9Fv1VxgM0lmA+3j5vnqr4H7wKhT57aGKrzAYpLMA9zVD/wfvAarAlYv7reorDAbpNMDxu9IqcBXid/Otu8X3EJ0GuK8iCzFT4Mrl+O34muE8wL19+78XcJcCVy7mtwni23mAezf/kMMUuGIxv1V+hcEgnQS4Pz/us/RtrbEUuFIxv9V+hcEgnQO4z9cHYh8vy8a5Alco5rf6rzAYo1MA95X4LrNzzXoVuDJxvzV8hcEQnQI41fNIgVOJSoFTiUqBU4lKgVOJSoFTiUqBU4lKgVOJSoFTiUqBU4lKgVOJSoFTiUqBU4lKgVOJSoFTiUqBU4lKgVOJSoFTiUqBU4lKgVOJSoFTiUqBU4lKgVOJSoFTier/Aai9kjnguxiyAAAAAElFTkSuQmCC" /><!-- --></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>))</span>
<span id="cb5-2"><a href="#cb5-2"></a></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="co">## Train the model</span></span>
<span id="cb5-4"><a href="#cb5-4"></a>mod_frame &lt;-<span class="st"> </span><span class="kw">ModelFrame</span>(X, y)</span>
<span id="cb5-5"><a href="#cb5-5"></a>knn_mod &lt;-<span class="st"> </span><span class="kw">fit</span>(mod_frame, <span class="dt">model =</span> KNNModel)</span></code></pre></div>
<p>The PDPs correctly identify the marginal effects.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="co">## Partial depedence of X1</span></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="kw">plot</span>(<span class="kw">totalvis</span>(knn_mod, X, <span class="dt">feature =</span> <span class="st">&quot;X1&quot;</span>, <span class="dt">pc_num =</span> <span class="ot">NULL</span>))</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="co">## Partial depedence of X2</span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="kw">plot</span>(<span class="kw">totalvis</span>(knn_mod, X, <span class="dt">feature =</span> <span class="st">&quot;X2&quot;</span>, <span class="dt">pc_num =</span> <span class="ot">NULL</span>))</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p><code>totalvis</code> groups the features based on their correlation and presents a reasonable summary of their combined effect.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="co">## Total effect plot</span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="kw">plot</span>(<span class="kw">totalvis</span>(knn_mod, X), <span class="dt">legend_cex =</span> <span class="fl">0.9</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<pre><code>##   feature_name loading_value
## 1           X2         0.707
## 2           X1         0.707</code></pre>
</div>
<div id="correlated-features-with-different-effects" class="section level2">
<h2><span class="header-section-number">2.2</span> Correlated features with different effects</h2>
<p>When using PCA to transform the training data, the assocation with the response is not taken into account. Thus, the principal components should be assessed to see if the covariates behave constructively on the outcome. To assess this, we generate two correlated predictors who have opposing effects on the outcome and look to identify their contradictory behavior.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="co">## Generate data</span></span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="kw">set.seed</span>(<span class="dv">2021</span>)</span>
<span id="cb10-3"><a href="#cb10-3"></a>X &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(<span class="kw">mvrnorm</span>(<span class="dt">n =</span> <span class="dv">1000</span>, <span class="dt">mu =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">2</span>), </span>
<span id="cb10-4"><a href="#cb10-4"></a>                           <span class="dt">Sigma =</span> <span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="fl">0.9</span>, <span class="fl">0.9</span>, <span class="dv">1</span>), <span class="dt">nrow =</span> <span class="dv">2</span>)))</span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="kw">colnames</span>(X) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;X1&quot;</span>, <span class="st">&quot;X2&quot;</span>)</span>
<span id="cb10-6"><a href="#cb10-6"></a>y =<span class="st"> </span>X[, <span class="dv">1</span>] <span class="op">-</span><span class="st"> </span>X[, <span class="dv">2</span>] <span class="op">+</span><span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">1000</span>, <span class="dv">0</span>, <span class="fl">0.1</span>) </span>
<span id="cb10-7"><a href="#cb10-7"></a></span>
<span id="cb10-8"><a href="#cb10-8"></a><span class="co">## Train model</span></span>
<span id="cb10-9"><a href="#cb10-9"></a>df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(y, X)</span>
<span id="cb10-10"><a href="#cb10-10"></a>gbm_mod &lt;-<span class="st"> </span><span class="kw">gbm</span>(y <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> df, <span class="dt">n.trees =</span> <span class="dv">200</span>, </span>
<span id="cb10-11"><a href="#cb10-11"></a>               <span class="dt">distribution =</span> <span class="st">&quot;gaussian&quot;</span>)</span></code></pre></div>
<p>Due to the negating effects of the two covariates, the average prediction remains near 0 throughout the range of the prinicpal component.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="co">## Total effect plot</span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="kw">plot</span>(<span class="kw">totalvis</span>(gbm_mod, X), <span class="dt">legend_loc =</span> <span class="st">&quot;topleft&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<pre><code>##   feature_name loading_value
## 1           X2         0.707
## 2           X1         0.707</code></pre>
<p>Using a <code>partial_effects</code> plot, we take a deeper look at the dependence structure. Highlighted in this is the opposing effects of the two covariates, which appear to cancel each other out across the range of the principal component.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="co">## Partial effects plot</span></span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="kw">plot</span>(<span class="kw">partial_effects</span>(gbm_mod, X), <span class="dt">legend_cex =</span> <span class="fl">0.88</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="correlated-feature-with-no-effect-on-the-outcome" class="section level2">
<h2><span class="header-section-number">2.3</span> Correlated feature with no effect on the outcome</h2>
<p>In the final simulated example, we assess <code>totalvis</code>’ ability to correctly identify inputs which are relevant to the response. To do this, we generate two correlated features, but only one acts on the outcome. Additionally, this example indicates the usability of <code>totalvis</code> in the classification setting.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="co">## Generate data</span></span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="kw">set.seed</span>(<span class="dv">2021</span>)</span>
<span id="cb14-3"><a href="#cb14-3"></a>X &lt;-<span class="st"> </span>MASS<span class="op">::</span><span class="kw">mvrnorm</span>(<span class="dt">n =</span> <span class="dv">1000</span>, <span class="dt">mu =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">2</span>), </span>
<span id="cb14-4"><a href="#cb14-4"></a>                   <span class="dt">Sigma =</span> <span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="fl">0.8</span>, <span class="fl">0.8</span>, <span class="dv">1</span>), <span class="dt">nrow =</span> <span class="dv">2</span>))</span>
<span id="cb14-5"><a href="#cb14-5"></a><span class="kw">colnames</span>(X) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;X1&quot;</span>, <span class="st">&quot;X2&quot;</span>)</span>
<span id="cb14-6"><a href="#cb14-6"></a>y =<span class="st"> </span><span class="kw">as.factor</span>((X[, <span class="dv">1</span>] <span class="op">+</span><span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">1000</span>, <span class="dv">0</span>, <span class="fl">0.1</span>)) <span class="op">&gt;</span><span class="st"> </span><span class="fl">1.5</span>)  </span>
<span id="cb14-7"><a href="#cb14-7"></a></span>
<span id="cb14-8"><a href="#cb14-8"></a><span class="co">## Train model, plot pdp_pca</span></span>
<span id="cb14-9"><a href="#cb14-9"></a>mod &lt;-<span class="st"> </span><span class="kw">train</span>(X, y , <span class="dt">method =</span> <span class="st">&quot;nnet&quot;</span>, <span class="dt">trace =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<p>To relate the total effect of group of predictors to a covariate of interest, we make use of the ‘pin’ argument, which offers a more interpretable x-axis. In this case, we present a ‘pinplot’ for X2, which is positively related to X1 but does not affect the outcome. As referenced below, the ‘pinplot’ is not able to distiguish between the effects of correlated predictors.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="co">## Pin plot</span></span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="kw">plot</span>(<span class="kw">totalvis</span>(mod, X, <span class="dt">pin =</span> <span class="st">&quot;X2&quot;</span>, <span class="dt">type =</span> <span class="st">&quot;classification&quot;</span>))</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>However, <code>partial_effects</code> is able to identify the relevant predictors in the model. For this example, we make use of the <code>differenced = FALSE</code> argument to add the <code>partial_effects</code> lines to the ‘total effect’ curve. At all points across the range of the principal component, the partial effect curve of X1 mirrors the total effect, suggesting that X2 has little influence on the predictions.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="co">## Partial effects plot</span></span>
<span id="cb16-2"><a href="#cb16-2"></a>diag_obj &lt;-<span class="st"> </span><span class="kw">partial_effects</span>(mod, X, <span class="dt">type =</span> <span class="st">&quot;classification&quot;</span>)</span>
<span id="cb16-3"><a href="#cb16-3"></a><span class="kw">plot</span>(diag_obj, <span class="dt">differenced =</span> <span class="ot">FALSE</span>, <span class="dt">legend_loc =</span> <span class="st">&quot;topleft&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAnAAAAGwCAMAAAAezai4AAAAvVBMVEUAAAAAADoAAGYAOjoAOmYAOpAAZpAAZrY6AAA6ADo6AGY6OgA6OmY6ZpA6ZrY6kLY6kNtmAABmADpmOgBmOjpmkJBmkLZmkNtmtttmtv+QOgCQOjqQZgCQZjqQkGaQkLaQtpCQttuQtv+Q2/+ZmZm2ZgC2Zjq2ZpC2kGa225C229u22/+2/9u2///bkDrbkGbbtmbbtpDb27bb29vb2//b/7bb///mnwD/tmb/trb/25D/27b//7b//9v///9bVzDMAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAVAElEQVR4nO2dC3ejuBlAyXTSZB+dxrt9Jd3tK/a23e14222buJ6Y//+zChIPgREGIX1GcO85k4ktI+Rwz6cXSEkKIEhy7QLAukA4EAXhQBSEA1EQDkRBOBAF4UAUhANREA5EQTgQBeFAFIQDURAOREE4EAXhQBSEA1EQDkRBOBAF4UAUhANREA5EQTgQBeFAFIQDURAOREE4EAXhQBSEA1EQDkRBOBAF4UAUhANR1iTcPtF8+YPlA6e/fkxPT8nti/le/bo8PsnfOX13nyQf9M+e7Hoxjm6V7fTPLxoF3TULFTFrFC65ee5M//T1u+HCHfL/H/TP7tOp7Hoxjm6W7e3r4pVOPH2XIFyENITpYJd0GGITbq/U2NvktWXXKlB1dDN6PlWvHrO0f31tLXJ8rEs4ZcCnjbrO6jJ++azev/nT18k7FVXe/UMLVqU2hKsN2qlo9EURk/IQdPNBfyyvDH/2u+IT2QE/Zq9vfmHU4v/6VfaB37yUeTyfly2z7/2fsxdPhdrJzT3CRUgpjAosh7oG09Hl9htDuDp1iHBvG/Xp9x/LhLwuLIQrQld95L4KZB3CqbJlp9QvTr//8J/8rfffPyFchBQX9adN9n92UX/+kh7v81ZSpsDtD+m/dR2oBDNSO6vUx7RRpWYH/lDklZn6y5dP+Rl0dpmLdy/pP+uG3vG+iFoPrSq1Llt+jFHsHz+8tBuWEbMu4ZptuJ/+lkWoO/V+3lQyhDNSBwiXCfKQFs7ohtv+F98X2WV+vf/eLETRslP/WdpwWl0ThIuSRk/w9K3+/a4ONIZwdeoA4TJBynxNM8rskqLJpig/sNdttXPhdH4ItwSKi6pa8LkI7//406ZbOCPV0oYzhTskpnBVbahj2Sc9wnHzF/1mWV0ecmvPhVNla1WpKcJFiimMjiJvFuGM1AHCZZ9+LN49i3AZn/7wRVWL90S4Om+j01D0bhEuSsyLqiJM1WloC2ekDhDOjEjassOXf26Mw52+qX63tuEaeZvDIinCRUorwt2+5FfUiHD7ahjESO1sw1WylL3Um9/lQ2h6PEV1KssKU/Va83q1zKS/l6ppDfwiXKS0qq2zTsOhGoczUocIV4zDqVx2VbYqu4/f1f2URi55pjbh6qmtD1VpES4+mlHk27ze2ps1Wz5fUIyx1qlDhEs/fZt1VIv2lppp+G2Z3Q9paxq+mGn4rc7QIlw5eV8OqCAcgBsIB6IgHIiCcCAKwoEoCAeiIByIgnAgCsKBKAgHoiAciIJwIArCgSgIB6IgHIiCcCAKwoEoCAeiIByIgnAgCsKBKAgHoiAciIJwIArCgSgIB6IgHIiCcCAKwoEoCAeiIByIMk64cqE+654+CayUIMLty+XcD7YNzWYWMGdWnAUTRLjTU6XZ3rIg48yu8MyKs2CCCPe2KVeHTw+WSnVmV3hmxVkwRDjFzIqzYEK14YoQRxsOmoQRrlwf3r6k9syu8MyKk7Hddr//+mo5wJYw+gB/OXW9H0g46eymMrPiZLopzt5/1ZwfYEsYfYC/nLrfRzjFzIpTCnc2iFVcxPPRLVvC6AP85XQd4fb0UnvpqjmTRMlWGmfIpy5sdXWNC91IMAwYdoC/nLoOaH25oX8ZP5ek9t9Ldt64UnFaNWcV1LL/s6ulX23Vi9fXrb6I1c/y4pa/mz+rhEEH+Mup84DmV6ZKVVxbuFYka1RTZ1e3rL6MzzQSWgdfPsBfTh0HtL4ywimuUxxbzdlo/7wav9NpcAbhUiWcNq2sR8vmRn6htqZx5REI5wrC5SjHjM5o+X7u2za1XF5LXmsehyuHfXN891KrvI2MD49mun5RbEdabnKrN7ptUR93HeGMarSVolyzXuCYCRPhTk/WG+Fcsmtz/OzZfGncK2AIV01yvG0e1L8zjOOuIlzVbjtPstZf0ROoSj093fV/oJ1d0sPZwWOFe2x+pOO4KwiXFA23zkSEG3tJDknHFbZm16dbh3GlcPne3Q/55vB5xZnXoY8dwuXJRRW8T4qKNf/lrjjO5dt5oGi5WdMXaVs6l06Dm3C51G+bO+3YLt+T/ua5L8Llycf7h/JzD9eMcN1Nt3S5opVELJy+6+5w86yM+uo5D2aPZ52Gh0o43Y47vPtYNuiuKJz2rSNhoRVpzTyEG4kWLtdL/SzFOSTJY0+Ey9TUn9cHXlG4ZL2+xS9cZo2uL7NW2t/ve4UrYt5j2QS8lnBr9i1+4YoIp14c+4W7Kfq2V45wq/YtZuEabTj1sM6ht0qt/LpuG0771pWyBt9iFs7opT4Uwa3oIuRYeqnpLvuR/3J6ujNGg8WES1buW9TCFeNweY/09iVrw90873S4S9O6l1p0YtW7+6SYEVPjcPo4D8UZwep9i1M4/wgVB98QTiNTHO1bZ9JafEM4jURxLs2dChRhBiCcInRxMs8ssyYFa/EN4TRhi2PcPd5OWo1oJQinEBKunbDcu5CsIJwiaHGqZ2XOUhDOwwdDZ3e814NnxYI5x88v3FscuDgDqJ6VaSco2VZmXHzCFSsyqRvb8mmESzezhy7OAIpnZc7e16oh3LQPhs9ulzlW3MN+6FlGWKo4l+l7dGFt/YYYhcvnT/WaJVmwsy2xKVecy6zwWRkrMxFu28fZwcf7X9+XN3rEINwKn5WxMg/hen3ruFj7+iHTCIRjwNdgHsKNjHCnp7rlFolwIfOPipkIN47d7X835XOvCBcXMQqX33hZrVY9f+GyFhzCVUQo3PE+j2674gmFCISz3ZKUteACnnamxCdcsW7J20ZPOMxfOOs9cCsb8tVEJ1zWYSifQtVDv3MXLrHd47u2SS1NdMKFIbBw3Slr9C2UcLskuVNbWNqWtFmPcNSoDcIIt1erGd3Vj4BOyy484YpDjdokiHDqEWX9oPvqN3cjwDUJIpx6ClS35te+faU9wCGcpw+mRDgz474Ah3A+PphTteGMnVMnZBeeYMWhRm0RXy/VvMVcncKi9ChCCUeXoU2E43D1Leanp3xlmuTC+tWBi9MLAa5NhMLVt5jrhd5sGxZKFacPugxtQgsXYvvK+hZzRbXQ4AQCCUeNeoZwhLMtFP3ax1ku5i3mOuBNLtfkHDqhRj1jHlVqr28dl8a4xby+M85fcXzBINw58xBuZIRr3GLuo88QULjulNXWqKGEU+MVSc9Do75uMfcS30IJR416TqCB3+oGcJsPnm4x3/vxLYxwdBk6CDe1pQkwtWXcYr6/sKPXYIIIR4DrINzkvcb/5L1xi3mxvogHQglHl6FNdBHOvMV8Xy5U7prZ9OL05UmN2kGoNlwR4oK04QIQojjUqF0E6qWWG4Vb4tsahGMQrpOZjMNdmwDF6Q1wCOfvg1fJbiphhCPAnYNwCv/FocvQDcIp/BeHLkM3CKcIIhw1agcIp/BenC01ajcIpwghHAGuC4RTIJwUCKfwXRxqVBsIpwggHAGuk6sJNzP8fjsCnBUiXAgIcFYQLgQIZwXhAkCNagfhAkCAs4NwAUA4OwjnH2rUHhDOPwS4HhDOOwS4PhDOOwS4PhDOOwjXB8L5hhq1F4TzDQGuF4TzjX13VIRLEc479ntPqFFzEM4z9nud8C0H4TzTc3MdvqXBhMsXej7e9yxstFDhsg6D97s5l0UY4ZRvnz03VoqbkF0sbDXXLsasCSKc2iV1p1bhjWRzNz8g3GUCCfdYLkoYyfaVXlBDvt3G0V8oCVSlZtFtv7oIt1UtuA7hbMv/r5Ewwr1t3n00Nk2dml0sKOM6AhzC1YQaFjnop++sm3YsVbiuGlXJhnEaxuE8YhcuZdy3AOF8knRP3CvX8E0RWrgQ21fOFts8Km24GuEIF2pthXlg+14IV0OV6pG+iXvZkswXhPNHfifcEr+XVwIJF3b7ypliv9cXKsIIF3b7yrmCcAMIIlzY7Svniv3pGe6Eqwk2eV+wosl7NbHVmUIPtYYI5w0e1xpCqDZcZNtX+oDnUYcwXri3r/QNILbKUn8osu0rPdD7ALRwWWaMu3C2SSvP540GatRBjBVuV09OTdpvfkXCUaOauEc4ofPGAjXqMJja8gSDIsNwEK7sENCGM6EJNwwH4Xa3L/u79HhveeLU83ljgSbcMBzacJuH9HD7Yh3S9XzeSKAJNxAX4R7T4+cf1T+B80YCTbiBjBcun7fKe6oIZ0KNOhCHNlw+4rt7oEptQI06EJdhkd1d3lOd1EldmnA04YbCOJwXGBQZCsJ5gSbcUByEu/i8gtfzxgE16lBcBn6ntd5GnjcKaMINxm3gV/C8UUATbjBuA7+C540CmnCDcRn4ta7BFeK8MUCNOhyHNtzEafuR540BatThjBSuvDWJXqoJNepwGIfzADXqcBBuOjThRuDSS7Wv3BvgvBFAE24ELhFuP/WRrTHnjQCacCNwrFInO7cW4YSLMn+c23D7af3UBQlHE24MbsLluzDkuxu534O5LOGoUQfj+JigNq13eRFP550/BLgxuPRSrZugtumZk1iOcNSoowgyDjdgPmJRwjEoMpwwA7/FsnBriXA04YYTaKbhbZO38lYvnHBRYiDY1NYua+mtQTiacOMIN5e6Tx5WIhw16ggCTt4f73+2cuGEixIFIe8WOT0lixcuQbhxcHvSNLo25NUgXCehhVv6fqk04UYiHOEWt18qNepIqFInQRNuLAg3CWsTjhrVQiDh1rJfKgFuLGGEW81+qQg3liDCrWY3Qea1RhPo9qSV7JfKoMhoiHBTIMCNJlQbbhX7pTIoMp5g98OtYb9UBkXGwzjcBAhw40G4CSDceBDOHZpwDiCcOzThHEA4dwhwDiCcM9SoLiCcMwk3+zqAcM7QhHMB4ZyhRnUB4VyhCecEwrlCjeoEwrlCgHMC4VxBOCcQzhGacG4gnCM04dxAOEcIcG4gnBvUqI4gnBtJwuMzTiCcG9blUfCtH4RzA+EcQTgnehaAwrdeEM6JBS04JgzCuZD1UBHODYQbz1Zz7WLECcKNp0c4egyXQLjRqCWTOo171VyhTPGAcKPZqhYcwrkRSLi92sE3XeYq5so4i2/MNFwg0OpJN8/p2+YuXaxwtho1ZeT3AgHXh1M7lK9JOO0avvUSdAXM3e3LEoXrrE9zaMNdJuwKmLu7BQpnn9ZCuMsEasMVmr1tFrgFed+0FrZdIlgvVVeqp6fFCZcwrTUFxuFGYr/VF4aAcCOxb80AQwgt3NI6DT0BjubbEIQjXPTbV7Ih70SoUkfR+7AWwg0A4UZBgJtKIOEWun1l72ZuCDeEQAO/C92+Et8mE3Zqa2Gbu7Fb5XSCTt6nC9u+kgA3HSLccAhwHgjVhlvi9pUEOA8E6qUucftKApwPGIcbDAHOBwg3FAKcFxBuIIz5+gHhBqKeDexKwLdRINwwqFA9gXDDoEL1BMINggDnC4QbBAHOFwg3BAKcNxBuCAQ4byDcAAhw/kC4yzDm6xGEuwxjvh5BuItQofoE4S5CgPMJwl2CAOcVhLsEAc4rCHeBfJ9KApw/EO4CbOPmF4TrJ+aFd2YJwvWhtgCJo6ixgHB2iuXxO4pK680ZhLPTswEIPVRXEM6KdRM3hJsAwlmxbeLGllpTQDgbyrWuTWfYUmsKCNdNooObfRM3fHMjkHBxr4CpR0P6hKNGdSXU6kkRr4Cpx0IK5RophWQINwHWh2uRVL61EkzLsM2ZIMLFuwJmUY3adMOzyRDhDJLEohu+eSNUGy6qFTB1Uy2pfKsS6ioU2zwRqJfqsAKm9YraEnwdsN2+vm6rjmlifr4SDd18MZdxOGudZUvwfsD5FmDUowGYmXDJGbaEqQdUYx/bIqFsulWOMYUVgtDCDdy+UqlQ+WCo0UgwnPFywLaZUBakqkaZwvKPcISrA07zfS1CU5Pyd/NnleD1gK36WZSjjmmvTGH5Z0ZVan7Vzdqv+r1KMGtFrwfk/YaqHGaZXl8Rzi8zEq7r4ibNhMaIReuALC0xDkjUC/Wu+tfqG3Q37owQnDYTklBMzznV37CVUWokFi/r34u/bXFc+WdN9L/is8Yfu/6rty5b0v229Sr3fNT9g4rRk/dzFK4OiAjXfdlmI5zL5H1n3ZU0ExpNv9YBpXC5JsVHG8LlynVe5jT3Km1cnjMREK7zss1FOLepra4ztL9gTylq4dLyz9USznKZ0/oNhItTOLfJe4RzzAHhiHDDQbjhx9pxmrxHOMccEM5t+0qEc8wB4YZkByvlSsLN5myC32uJXyrcmRAuolMt4UwIF9GplnAmhIvoVEs4E8JFdKolnAnhIjrVEs6EcBGdaglnQriITrWEMyFcRKdawplkhYPVg3AgCsKBKAgHoiAciIJwIArCgSgIB6IgHIiCcCAKwoEoCAeiIByIIi7czvpMq0/UMk+Wh7W9ckiSm2eB88h9I0W4qyQt3MH+ELVHTk+ZBfvkLviJDtl5DhLGiX0jRcCrJCzc20ZEuON9viaFbSFif+jVVnYCGkh9I0XIqyQs3P72G5EqVRE+9IhqkEp8I0XIqyQr3PGzZ5k2nGIXXITs+6T2tcv8E/4b5QS9SqLC5TWQnHDWJZ48nkJFHKG4I/KN0tBXSVS4fFU5MeEOQn0GOeEkvlEa+ipJCqcqICnhRKKBaJUqE99CXyUh4fb5INK+WNnp8fLnJ57JWP86KJKdBplvpP+AAa/SQgd+92GtLpEbFpH6RgXRR7gaEeGO90Jj8mIDv2LfSINw4yiqBQET9kJTW3LfSLEg4WDdIByIgnAgCsKBKAgHoiAciIJwIArCgSgIB6IgHIiCcCAKwoEoCAeiIByIgnAgCsKBKAgHoiAciIJwIArCgSgIB6IgHIiCcCAKwoEoCAeiIByIgnAgCsJNYKcX/NCLJ6l17cslOY6fS63CGhsINwG95MvbJv9PLxe406vNvG3Elv2NDYSbQLHGUL5el16aMAtzWr4E4Swg3AQK4XLZ9kVl+r+PKtjJLWweGwg3gTrCnZ6aq2AinA2Em0DZhrvL/jUXqEQ4Gwg3gaKX+pAi3GAQbgL1wqRUqUNBuAkYK+GWnYaDXmwc4Wwg3AQM4RrDIghnB+EmYK71rQZ+1a6m6hXCWUC4CTQWl3/bGFNbCGcD4UAUhANREA5EQTgQBeFAFIQDURAOREE4EAXhQBSEA1EQDkRBOBAF4UAUhANREA5EQTgQBeFAFIQDURAOREE4EAXhQBSEA1EQDkRBOBDl/0m/Pr/y5oVOAAAAAElFTkSuQmCC" /><!-- --></p>
</div>
</div>
<div id="communities-and-crimes-example" class="section level1">
<h1><span class="header-section-number">3</span> Communities and Crimes Example</h1>
<div id="feature-importance-and-correlation" class="section level2">
<h2><span class="header-section-number">3.1</span> Feature importance and correlation</h2>
<p>The application uses the Community and Crimes Unnormalized Data Set, which comes the UCI Machine Learning Repository (<a href="https://archive.ics.uci.edu/ml/index.php" class="uri">https://archive.ics.uci.edu/ml/index.php</a>). Our study uses 101 of the predictors and the response variable of ‘murders per 100k population’. Many of the predictiors are related, with 12% of the correlations above 0.5.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="co">## Get data</span></span>
<span id="cb17-2"><a href="#cb17-2"></a>crimes &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="kw">paste0</span>(<span class="st">&quot;https://archive.ics.uci.edu/ml/machine-learning-&quot;</span>,</span>
<span id="cb17-3"><a href="#cb17-3"></a>                          <span class="st">&quot;databases/00211/CommViolPredUnnormalizedData.txt&quot;</span>), </span>
<span id="cb17-4"><a href="#cb17-4"></a>                   <span class="dt">header =</span> F)</span>
<span id="cb17-5"><a href="#cb17-5"></a></span>
<span id="cb17-6"><a href="#cb17-6"></a><span class="co">## Add column names</span></span>
<span id="cb17-7"><a href="#cb17-7"></a>crimes_descr &lt;-<span class="st"> </span><span class="kw">readLines</span>(<span class="kw">paste0</span>(<span class="st">&quot;http://archive.ics.uci.edu/ml/datasets/&quot;</span>,</span>
<span id="cb17-8"><a href="#cb17-8"></a>                                 <span class="st">&quot;Communities+and+Crime+Unnormalized&quot;</span>))</span>
<span id="cb17-9"><a href="#cb17-9"></a>crimes_descr &lt;-<span class="st"> </span><span class="kw">strsplit</span>(crimes_descr[<span class="kw">grepl</span>(<span class="dt">pattern =</span> <span class="st">&quot;&lt;br&gt;@attribute&quot;</span>, </span>
<span id="cb17-10"><a href="#cb17-10"></a>                                            <span class="dt">x =</span> crimes_descr)], <span class="dt">split =</span> <span class="st">&quot; &quot;</span>)</span>
<span id="cb17-11"><a href="#cb17-11"></a><span class="kw">colnames</span>(crimes) &lt;-<span class="st"> </span><span class="kw">vapply</span>(crimes_descr, <span class="dt">FUN =</span> <span class="cf">function</span>(rw) {rw[[<span class="dv">2</span>]]}, </span>
<span id="cb17-12"><a href="#cb17-12"></a>                           <span class="dt">FUN.VALUE =</span> <span class="st">&quot;STRING&quot;</span>)</span>
<span id="cb17-13"><a href="#cb17-13"></a></span>
<span id="cb17-14"><a href="#cb17-14"></a><span class="co">## Replace &quot;?&quot; with NA</span></span>
<span id="cb17-15"><a href="#cb17-15"></a>crimes[crimes <span class="op">==</span><span class="st"> &quot;?&quot;</span>] &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb17-16"><a href="#cb17-16"></a>crimes &lt;-<span class="st"> </span>crimes[, <span class="kw">colSums</span>(<span class="kw">is.na</span>(crimes)) <span class="op">==</span><span class="st"> </span><span class="dv">0</span>]</span>
<span id="cb17-17"><a href="#cb17-17"></a></span>
<span id="cb17-18"><a href="#cb17-18"></a><span class="co">## Select a subset of predictors, Convert all columns to numeric, add outcome</span></span>
<span id="cb17-19"><a href="#cb17-19"></a>col_start &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">names</span>(crimes) <span class="op">==</span><span class="st"> &quot;pop&quot;</span>)</span>
<span id="cb17-20"><a href="#cb17-20"></a>end_start &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">names</span>(crimes) <span class="op">==</span><span class="st"> &quot;pctOfficDrugUnit&quot;</span>)</span>
<span id="cb17-21"><a href="#cb17-21"></a>X &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(<span class="kw">sapply</span>(crimes[, col_start<span class="op">:</span>end_start], as.numeric))</span>
<span id="cb17-22"><a href="#cb17-22"></a>outcome &lt;-<span class="st"> </span>crimes<span class="op">$</span>murdPerPop</span>
<span id="cb17-23"><a href="#cb17-23"></a></span>
<span id="cb17-24"><a href="#cb17-24"></a><span class="co">## Train the model</span></span>
<span id="cb17-25"><a href="#cb17-25"></a><span class="kw">set.seed</span>(<span class="dv">2021</span>)</span>
<span id="cb17-26"><a href="#cb17-26"></a>rf_mod &lt;-<span class="st"> </span><span class="kw">randomForest</span>(X, outcome)</span></code></pre></div>
<p>Visual summaries (partial dependence and ICE plots) are often produced to interpret the effects of the most important features in black-box models. The example uses a <code>randomForest</code> model from the <code>randomForest</code> package, which has readily available measures of feature importance. We select one of the primary features, ‘pctKids2Par’, for further exploration.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="co">## Feature importance</span></span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="kw">varImpPlot</span>(rf_mod, <span class="dt">n.var =</span> <span class="dv">10</span>, <span class="dt">main =</span> <span class="st">&quot;Feature Importance&quot;</span>, <span class="dt">pt.cex =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>In this instance, ‘pctKids2Par’ presents high correlation with several other predictiors, limiting the appropriateness of PDPs and ICE curves.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="co">## Correlation</span></span>
<span id="cb19-2"><a href="#cb19-2"></a>cor_vals &lt;-<span class="st"> </span><span class="kw">abs</span>(<span class="kw">cor</span>(X[, <span class="st">&quot;pctKids2Par&quot;</span>], </span>
<span id="cb19-3"><a href="#cb19-3"></a>                    X[, <span class="kw">setdiff</span>(<span class="kw">colnames</span>(X), <span class="st">&quot;pctKids2Par&quot;</span>)]))</span>
<span id="cb19-4"><a href="#cb19-4"></a><span class="kw">hist</span>(cor_vals, <span class="dt">breaks =</span> <span class="dv">30</span>, <span class="dt">xlab =</span> <span class="st">&quot;abs(correlation)&quot;</span>, </span>
<span id="cb19-5"><a href="#cb19-5"></a>     <span class="dt">main =</span> <span class="st">&quot;Correlation with pctKids2Par&quot;</span>)</span>
<span id="cb19-6"><a href="#cb19-6"></a>num &lt;-<span class="st"> </span><span class="kw">quantile</span>(cor_vals, <span class="fl">0.8</span>)</span>
<span id="cb19-7"><a href="#cb19-7"></a><span class="kw">abline</span>(<span class="dt">v =</span> num, <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">lwd =</span> <span class="dv">3</span>)</span>
<span id="cb19-8"><a href="#cb19-8"></a><span class="kw">text</span>(<span class="dt">x =</span> num <span class="op">+</span><span class="st"> </span><span class="fl">0.18</span>, <span class="dt">y =</span> <span class="dv">10</span>, <span class="st">&quot; 80th Percentile&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="totalvis-plots" class="section level2">
<h2><span class="header-section-number">3.2</span> totalvis plots</h2>
<p>Due to high correlations with our feature of interest, we turn to <code>totalvis</code> to interpret groups of features through their total effect. <code>totalvis</code> accomplishes this by transforming the training data with PCA and then generating PDPs for the principal components. The top contributors to the linear combination are presented in the legend, where contribution is defined by the magnitudes of the loadings. In cases such as this, there is a clear latent factor captured by the top features, income or economic status of a neighborhood. Using this, we can interpret the impact that neighborhood income level has on the response.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="co">## totalvis plot</span></span>
<span id="cb20-2"><a href="#cb20-2"></a>vis_object &lt;-<span class="st"> </span><span class="kw">totalvis</span>(rf_mod, X)</span>
<span id="cb20-3"><a href="#cb20-3"></a>df &lt;-<span class="st"> </span><span class="kw">plot</span>(vis_object, <span class="dt">num_load =</span> <span class="dv">8</span>, <span class="dt">legend_cex =</span> <span class="fl">1.0</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>knitr<span class="op">::</span><span class="kw">kable</span>(df, <span class="dt">row.names =</span> F, <span class="dt">align =</span> <span class="st">&quot;lc&quot;</span>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">feature_name</th>
<th align="center">loading_value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">medFamIncome</td>
<td align="center">-0.187</td>
</tr>
<tr class="even">
<td align="left">medIncome</td>
<td align="center">-0.185</td>
</tr>
<tr class="odd">
<td align="left">pctWdiv</td>
<td align="center">-0.177</td>
</tr>
<tr class="even">
<td align="left">pctKids2Par</td>
<td align="center">-0.175</td>
</tr>
<tr class="odd">
<td align="left">pctPoverty</td>
<td align="center">0.173</td>
</tr>
<tr class="even">
<td align="left">pct2Par</td>
<td align="center">-0.173</td>
</tr>
<tr class="odd">
<td align="left">pctKids-4w2Par</td>
<td align="center">-0.172</td>
</tr>
<tr class="even">
<td align="left">perCapInc</td>
<td align="center">-0.169</td>
</tr>
</tbody>
</table>
<p>At this point, we associate the total effect with the covariate of interest using a ‘pinplot’. Comparing this to a partial dependence plot of the same feature, we see a much larger range of predicted values.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="co">## pinplot</span></span>
<span id="cb22-2"><a href="#cb22-2"></a><span class="kw">plot</span>(<span class="kw">totalvis</span>(rf_mod, X, <span class="dt">pin =</span> <span class="st">&quot;pctKids2Par&quot;</span>))</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="co">## pdp</span></span>
<span id="cb23-2"><a href="#cb23-2"></a><span class="kw">plot</span>(<span class="kw">totalvis</span>(rf_mod, X, <span class="dt">feature =</span> <span class="st">&quot;pctKids2Par&quot;</span>, <span class="dt">pc_num =</span> <span class="ot">NULL</span>))</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>As previously shown, there are a variety of insights to be gleaned for the <code>partial_effects</code> plot. In this instance, the lines appear to be shifting in unison and the underlying assumptions of <code>totalvis</code> appear to be reasonable. The default is the plot a standardized or ‘differenced’ version of the predictions, but partial effect lines can also be added to the original <code>totalvis</code> plot.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="co">## partial_effects (default)</span></span>
<span id="cb24-2"><a href="#cb24-2"></a>diag_obj &lt;-<span class="st"> </span><span class="kw">partial_effects</span>(rf_mod, X, <span class="dt">num_load =</span> <span class="dv">8</span>)</span>
<span id="cb24-3"><a href="#cb24-3"></a><span class="kw">plot</span>(diag_obj, <span class="dt">legend_loc =</span> <span class="st">&quot;left&quot;</span>, <span class="dt">legend_cex =</span> <span class="fl">0.74</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="co">## partial_effects (non-differenced)</span></span>
<span id="cb25-2"><a href="#cb25-2"></a><span class="kw">plot</span>(diag_obj, <span class="dt">differenced =</span> <span class="ot">FALSE</span>, <span class="dt">legend_loc =</span> <span class="st">&quot;topleft&quot;</span>, <span class="dt">legend_cex =</span> <span class="fl">0.9</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="additional-functionality" class="section level2">
<h2><span class="header-section-number">3.3</span> Additional functionality</h2>
<p>Given the reliance of the package on PCA, we offer a wrapper for the <code>screeplot</code> function that works with several of the <code>totalvis</code> objects.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a><span class="co">## Wrapper to scree plot</span></span>
<span id="cb26-2"><a href="#cb26-2"></a><span class="kw">scree_plot</span>(<span class="kw">totalvis</span>(rf_mod, X))</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>As a final addition to the package, we offer simple ICE curves. The default is to center the curves so they all have the same starting value in order to highlight differences in trajectory. This can be changed with the <code>center = FALSE</code> argument</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a><span class="co">## ice plot (default is centered)</span></span>
<span id="cb27-2"><a href="#cb27-2"></a>vis_obj &lt;-<span class="st"> </span><span class="kw">totalvis</span>(rf_mod, X, <span class="dt">ice =</span> T, <span class="dt">feature =</span> <span class="st">&quot;pctKids2Par&quot;</span>)</span></code></pre></div>
<pre><code>## ice = TRUE sets pc_num and pin to NULL</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a><span class="kw">plot</span>(vis_obj)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a><span class="co">## ice plot (uncentered)</span></span>
<span id="cb30-2"><a href="#cb30-2"></a><span class="kw">plot</span>(vis_obj, <span class="dt">center =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAnAAAAGwCAMAAAAezai4AAAAxlBMVEUAAAAAADoAAGYAOjoAOmYAOpAAZpAAZrY6AAA6ADo6AGY6OgA6Ojo6OmY6OpA6ZpA6ZrY6kLY6kNtmAABmADpmOgBmOjpmkJBmkLZmkNtmtttmtv+QOgCQOjqQZgCQZjqQkGaQkLaQtpCQttuQtv+Q29uQ2/+2ZgC2Zjq2ZpC2kDq2kGa225C227a229u22/+2/7a2/9u2///bkDrbkGbbtmbbtpDb27bb29vb2//b////AAD/tmb/25D/27b//7b//9v///+wExJ7AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAXTUlEQVR4nO2dDX/rtnWHaed6UpplSa2mXSOvy5LVyl7atJdLs3rylfT9v9QIgqRIEYDweg4I/p/fr+01RQLnHDwGSMolqwsAhFTcAYB1AeEAKRAOkALhACkQDpAC4QApEA6QAuEAKRAOkALhACkQDpAC4QApEA6QAuEAKRAOkALhACkQDpAC4QApEA6QAuEAKRAOkALhACkQDpAC4QApEA6QAuEAKRAOkALhACkQDpAC4QApEA6QAuEAKcULd36pnt7E//78RVVVX/4kttVVT/uR+oDxpv/4qGr5x21VfW3uXBxYVw+vXa8Pr5PWD9XjtOFPv+1j7EOUARfEWoQ7fdON4PPFWbhP3zyqhDv2zWmRB3bCtb5djMIdt21QYvchRClrOaxEuOa/e/bOws0mIkl9VwZ5oNzvqHDnpuGm58fXy/tW9G8MccmsRLhm/D780Ew5L5X86dagZuj/1CxnH366Cve35ufP/vlNfNYwHDDd3Dk0OrxBLN6ffTsc2ArX+9a1LpbjDz9I4f6n2f3hq+bQ02+3m0unYRfip1172N/E/PylnCcfvv+melzuQrsO4cTc0Rpz/pev/35RCjcsYJ0S9TC/TIS72TwIN1r/Dv3aPRKuWSwf9kM41wm3VasadzAV7tLbOl1qFzzrrUO4067ajLZd16t9t6Vxo5k1fq6a3aQSw8L2PFn5xptHS+rocGHHr9+amak5ZlhSv9/2Z3uy9Wafzdv5R6GZCO1NHPp800Xb5y+ineaYf2gjajutnn66/G/ysiVjHcLJwRpQCre/SLWkEp1kh6s33X7XzVPh9tO966/+fD2HG01h49ZPwqYmtA9/HsXWbFSdZv7yX1+0OtfXmJcJhGvpRKr7Gxf9iVwr1VW4yeaJcNPDJ5vb3v6xknNs3/qm/1yuru1ZoaCZGscrulxHz/8q/72xuVLJnHUIN1tSFRcNYkuz1O0nB4gNI+Emm+fCdYdvpq0Kd74VXu1vw2k//yRv2Dz8u9jS/Gb0SsutX8nLmOrDv/2yg3BL4PaiQYygVrhUM9y3rYzih0nr3WGfvvuiWzoH3yYhyvn5BOEWge1tkcjncMcvf5jehxP7bBTncF2UfxD/PO2GC9BxiO18Olw0QLi8Md/47UfVeJU6GmS7q9Sv3+QKWnd3Mtr9xOy1n1yliqM+the1Yl2Vd1r62fFmhnt6E78rmOEWwO1XW+LLT6Vw/c+z+3DtbbD5fbgb4a7NHYYz/ONwH647tJ8/xwf8OFwcvG+vW8fCDb8tEG4B3Hx5396BUAn3+NfmUvCr228aft828ePwJcJ48/Qcrj/80n3T8PvhwH4/sWA+9980/Oe2+uxbubIOf1VQV2rh2qvUDz/UN+v4MileODs0X5cSHb4mIFwLhKMCwrVAOCogXAuEowLCAVIgHCAFwgFSIBwgBcIBUiAcIAXCAVIgHCAFwgFSIBwgBcIBUiAcIAXCAVIgHCAFwgFSIBwgBcIBUiAcIAXCAVIgHCAFwgFSIBwgBcIBUiAcIAXCAVIgHCAFwgFSIgtXgZXCJVzc5sBSgHCAFAgHSIFwgBQIB0iBcIAUCAdIgXCAFAgHSMlIuCj3p0HmJBKuf+uT9iHxrsJBxkJII1zdv1f5OHnBsm9zIV+9uvUDUpNEuPPLoFk9vITWv7k7QMYlkUS4065/RfzlqFlUqQYbMmZGATOcN5gaGUh1DtdNcbHO4ciBgIlIdJUq3jEr0Mxv+QtnBPr5k9F9uOWCCdAeYuHWMAhYgU0kFe59u9d9tKZvGgpLJ4xEt0WupbW/LXJ/ZihExkUGHYs0M1x3ceo2wxl7L8vGjENLTbKrVHF9Gk84E4uUkT0ALpKdwx0eXomEM5KxjOtULt1FQ109ZyCcCXb91mhcwqvU9+1neQtnwntmdHNofcqlvC1yfqkWK9yUEP3MRq7OOHzTEB1H61ZmHISj50a7dU1yEI6JkXKrMg7CsTKa5G7P7goFwjFzneSUFxXFAeG4ubmAKF25jIRbya/4nNvEi65AnsKtTL1Z0gVnnpFwow/Xqt4KMs5SuNFua1Sv6EQzF250wKrUKzfBxQg3OnQl6pWZ1wKFGzVStnql5dOyaOFGzRXpXhlZTClEuFHDRam35NjVFCfcuI8C1FtgyGZKFm7U23LVW06kdqxDuFG/i1Mv+wDdWJtwowj81VOfJ9rjHKh7dtmyXuGuhPqT2Dk/TXMFwo1JoIu2F7+ownrOAAjHgps9CaRnA8Ix4awNyeSbHgjHh4citmt+vnZCOFb8xj2ydglRxG6dpGtVSJtbMLqRCW0xCxTBWWcRsyQQboxxgEoDwmXBvXmhHCBcTqxAOQiXH0UbB+FypGDlIFyWlLuuQrhMKVU5CJctZSoH4TKmROUgXNaUZxyEy5zSjINwuVOYcRAue8oyDsLlT1FfdyUS7vwii6R5eSWEc6Kkb1jTCFfL11cO77EMbA5cinnQSBLhzi+DZrV4jWVgc0BSxN8wJRHutBvesXW0fyM0uI/jn9dmCGa4hbJU61Kdw3VTHM7h6DDOfkwoorROxyn50052qJnfIFwqeP2aoQjQOpOYZYFwq4VYOJP7YA2kFO5YVQ+v8ZoDJZBIuENVPb//09v4Bsnd5hxPBsAiSSPcoblYOLSzm8NtkYhnpiBb0t34ff9cCOdw49dbONi4IBIJJ+6+nf9+oZnhssehdMWT6MZvP69J9eya49aCDpdSlkaii4ZaXp4eK801Q4Sr1PBRTWTM7FNYN6KcG7/hArq0Fpvo5ciVcoS77SDhEMcQbK3eFSvcrMN0/vmFYoiOMBZyViPcLABWATV9rMC51Qp3wz3/ottoaKlo6SCcGjcBHZn2YeieMGEqIJwH8awzeVWmchCOnql2BudKVA7CMWFcbCd7cUSXDgjHyn3tSjMOwmWBwbnCJjkIlxNK6coyDsLlx0w707Xs0oBwWaI0roiaQbicGXtmuphdEBAuczTKecGbiQTC5Y5Cl2DzyFCkY513jOIla65kTMPn2RCEAyaMI7gwINxSuD95LAIItxw8F7G8gHALYmxV8OkVk50QblHcVSeKh/FQZGCdapyKJWpuXYQMuF87vij6tE7StSqkza2d9Or4oYjUOqWY9YFwNHD7BuEANxAOkALhACnuwp1+I5/bq3vUYOR+QVn4C1fHFs54rgkKwVW4w9UKzaMGvfu1vMxZIwWVwX+Gi95v+CV3oRSVb0YXDa7CrcPPAlKY4CFc/x4t2ouGxDoy+2kRDUdYCfAQ7vD0Vm8u71vd43vj9qs41MuPqDY69x4UyuQw93rlhcc53O75cnx60z4Q37tflsHXxpcNs5jiJMiFj3D7y/uvPrb/idov67DOcErGu21ld/oo3EPLDnfhxOuexZVq4cIRYs5dVaOAwnPjcQ4n7vgenrNdUpeFMu95SWZbAkrPi89tkcNGXKkGXaQSvBhkWWhLNNvFcMQSSHQf7vwiq6K1kvzGb7gTydBGqwj+ojnvWwxphKv7772Oui/A+G/8Wu2kCT5VXKYPR9u8A88AD+Huzl7tdUXHYt8maFsXD2y7V4Rx/ZQ25Hj43Pi9e/Y2eg+0w/tSJx/fGYdlo89CUQZ9aeYb74xLDvjd+L1DpBlOs1k1ON5jnxm3JbrdNs12vvXeyPDjd+P3HnX/2sqY53CmXdR9+Ayz67EE2Ca3COV8bvxu7u/df8GvvVdn0W/M4XFv9H58/l345ejWj3/8afE4hwv82l7br0vxPcdIE0uidm1LYezF0O3NR+3/JI82FEfh+plL4HPn11QF93F3wjdQ+lBmO+sOvW1TfYh1vyQkuvFbN+m186Du//nglzzRiFOFoY9EsY/xkCrTC3hFpNZFtt1RIF55f9qJc724wlmQrlTkISrudujHUfm9BDuKQK2r1P+jWVXvXTXI2yLnF/FXc9TC6Uhcx0RRzf8iSRdDzKhS4jPDifXSeC+uv3Mi/jY4F+FmARASFOHsrpumWf+OSPFcUs3ODTd+D5tshbuB0j/73DWHqpt0apkN73M4oZz2OrXXTP9XTA5XqbYRRiWWW8FJubTp1DATfsIdK3ER2p6kqem/aji/hAsXPGbRcY00ShIRO6VDkYZ1vsO/xL04aVrA40WS/IprcsyNgBS8Rp0RRQbWVer/cdo9RPi/3od7EZ47J/4Ru486I4rwrSvkW1qS5kYNB5eECv8AXXPkQxG7dXkCSpu+OYsOg0vFHZX5SNt2fXv3Q5GxdWnsq8jQnDfehWOKxrBzWMNpUERiXQvrqnE0Fx3XOqbsWx3NfG+fthOjCMC6CrY7ejfnlwAJYWHZ7674fHpUnuVxYWHCWRA3TnXw0cNUfVqpPnPsn6AYjpQnHMM4OHZ3s9nyyJttQfmToaiVdVGdhsCnOe7i0OGUrK5Gi6if1cBbGxLCqoXTY6rG7IMFVNBq4K0NCQHC2TCviq5amRYywCPcFnGqq21bdt1NdtE26xl8ShTFsB4B2x1ZmktM9LL7dHqzTbWvRcD+RYgDhItAOgEVh2pbuduTa5gRUGRknbp9lTybC08mU0KiryyvafUdsaJIyLpqtjt6N0eeOxdOEdme5ilTTVBGNxT5WFfJdkfv5riLkw5V/vqPZntqyrSEglkNvCZv2x2pmuOuZQA3CZhro9hhvnnSjro7xR281HlmLpxj5K4dLhW9cfP8gquUnqUIZxwSaiKpFJRhpVxrSdIPogThXMcqI3wzUSe3hJyLF44E/zKoGvKPIF5gyYBweaAqUbdds//tZaq5kHFHL4CMhLM5iotkYVm2qth2mTlmFZhjxaOzLOEU7bAQKXjLnGwyvnOVmrQaBhSRWFfBul4czY0a5idW1MN2m73NK6n+T0zSosjUuiTORXRtLlWO8RuN0eKoYWNvqv51B9l0xk15wpWDqip365VXSa0G3tqQECDcKgjwCMIBdwI8gnBZk2n1Ajyivkp1zMPuuOyZZeKZmOa7rwzISLgooxQtvgy4Kjf7JI8A72M18JoRiDaWuuaS5UhMpDzu5knUTxCK6liXMeaYcJ/Dxc3FleCA+23TXZZRg6UI57h7OHHT1eEXlmZJJaqMC4qMrUsTXt07zUXMKkKj3j1Gwz+0uMmGoMjKOv14lfRoLlLKkfYMisGqDIH9zbqfxhHWulMk1hn77+jfHF0dlsuoSop66WuYzZ/VZCQcT0lASgI8chPu/CI71L45BMLRwVjZAI+chKv7N78dda+AW9ZlZ+LQ1NGR9Jawk2lHhoHX1NxhfIa3CTbqaV7Hlf2fmHvFRx1k9gQMvMsI9O9Lvehfx+Uwwzl0bGglcR0TheibmH13Yam4k9EM51TRoFK59kTAndosIgcFiritB8l2R0H/9kqOcziXOD2JFKlHUro86SOyQ1E76yI7DYl4xaVA+0LV7K9SndI1Y+iANid6rAZeU7Vo9dc1x12caNzN/c6+848V+xPlEojVwGuqZLujuRVTKKvhJltNkVVHqSqWc/0UMVurYrujd3PJcjTGwUZo94tYqa0G3tqQEFY9w42ImbeimNy1DfDI7T7ctcvw+3AZ4hj5chMNJcAjpxnu/KL9ElXfHHdxssX/b4Sjh+IVhZ9Hrl/eb5yb4y7OOnAaxgSkOoc7Vnvj5/Pm/s8G7uHi5KaAiyDAo9QXDVa+xYJ7HFJwuUp4mfs41J2WAI+KEs4Z4nFKQdzx8wbCRYTbKWdmo5K6g4yEK8K4O7gNk8toBlmRkACPsrjxy21MTJIPthLbSsfszs+jLISLBLdrE+jSZiDAo5KEcwbSeRLg0aqFswMKzgjwCMIF4+fdousS4BGEi0vgbLeQegV4BOGS4HQ3iDtYdwI8gnDpcFxnF6RfgEcQjpJSlAvwCMIxsPgJL8AjCMdAW5clL7cBHkE4FsaF8TFv5iBttQM8gnCZEUW/1AR4BOGyI0w5Gvw9gnB5w22WDm+PINyC4LZshLdHEG7ZQLj5JkAGm28QDqQkwCMIB9wJ8AjCAXcCPIJwwJ0AjyAccCfAIwgH3AnwCMIBdwI8gnDAnQCPIBxwJ8AjCAfcCfAIwgF3AjyCcMCdAI/SCxepYZARAQO/FOEiwT1ShaAorPUIxBzO/IULgHuQc0JRHesyxhyTooW7C7cFhCiSt65SzJKvW7gR3EKkRpGxdWli1hnCXeF2IimKdK3rErPIEG4MtxUJUSRrXZWYJYZwN3CLkQpFptYliVlfCGeC25KIKJKzrkLMkkI4C7hliYEiK+v0Y9YSwlnDrUwYinysE49ZRQjnDrc7XijSsM43ZvEgXDDcKtmhiNs6QadynF9kh9oXQ0O4YHhVskMRtXV6LrWoq2f5j2P/j6DmwD24xdKhiNQ6JYf0zy+DZvXTW3BzIBHFCHfaDe8fP04XVVMoYA1kNMNVrv1Us70rxfb+lY3ttuG/hxc5dv+UvwPiv6rL6MfL/NVDdyaGi+7Hi+rjkhmKfG/gtaNrT111U5zLORyEKwtK4ZpFVXaqmd8g3AogFc6nOQhXFhDuAuEogXAXCEcJhLtAOEog3AXCUZKZcGClMAmXUWd59b7i1KdAuBV0DuFYgHA5AOFW0DmEYwHC5QCEW0HnEI4FCJcDEG4FnUM4FiBcDmQUClgDEA6QAuEAKRAOkALhACkQDpAC4QApEA6QAuEAKRAOkALhACkQDpAC4QApJMK1T2ptn7d0rKqHV4oubzi0j9/h6P19W1WbC1Pnl7op/J6tdxUUwp1fmlxrUfZj848jQ+LH9nlPHL0fm45PO67Ua9GpMI6r8HMohHvfil+y+vGjfKLhYUPQ54TTTgjH0bvskyv188tGdspVeAV053DNL9hgHlmnkvrpD41wHL2/f97NKiypD8JxFV4BnXCHx4+y/EfqvJtuxTkcR+/Hx7/s2tNXntT7JZWp8CrIhBNPaZVnEdTnEmI9EcJx9F6LV1qIiYYn9f5agal3FVTCHftrBvq8xQOw2YR76KYWntSbVaVZTrl+05UQCSefQs0ys7edci2p8rSpOYXiSb0/dVvdktq9wobl3LXunie15+hdjnEz3iypDxPb2i4a+sft812dH5hui8h3qRyZbotIz7h6V0NzH65/qwPb/ccD143fujedJfX+HG5lN367RU3kW7N+tcXR+7H/Vo8l9QNr7yrw5T0gBcIBUiAcIAXCAVIgHCAFwgFSIBwgBcIBUiAcIAXCAVIgHCAFwgFSIBwgBcIBUiAcIAXCAVIgHCAFwgFSIBwgBcIBUiAcIAXCAVIgHCAFwgFSIBwgBcIBUiAcIAXCuXLc948qEU9ZlI9Han8YPbtjeE/AQT5WJYfHFmUChHOkNax/7cN+9MFIuOt7AuSOp50UFEA4Z67C3Tz+avTj9fl//VSYx5OLcgDCmXn//Pvt9YlX1Ua8WObp7frIYLmkiodhfdf8LD6txmtsJ1xr4EF+dvrNd1UOj6JkAsKZaRTay7VTPB/6tHvuZ7hu0pI/NgIdq+7JpsNCe5jOcOL5k7KNVa+vEM6MfHpn/fTWuNZu6IT7uboKJ1fQw8Pr5KnN7XO0+3O4TTOxvcqZrm9opUA4M91jcvvnMvfCVQ9/fGntEj9Kz5p9Trurce17Avqr1Od+W7W/XK9rVwmEM9M9cL4RrnuJkRSuXRo33Y91L5y8HdK9va+V7HBdPpvzvMf/3kI47gAy5yrcZIZrr1KFU5MZrt3hIJ9lLCe1q3Dt8e8QDsKZkedwh9k5XPuM6nae68/h6ofrFFgPFw6DcK2VRyypEM7M+7Z/5WjdLpmbVjzp0bk5jWv1ke9Qay4auvdaXd8TMJ3hTrtm4oNwwMD79nfb7rSslt9RHbr7cO2Hj3+Z3Ic7yrcDXN8TMD2He3g9iCsLCAe09KduIBIQzgyEiwyEMwPhIgPhACkQDpAC4QApEA6QAuEAKRAOkALhACkQDpAC4QApEA6QAuEAKRAOkALhACkQDpAC4QApEA6QAuEAKRAOkALhACkQDpAC4QAp/w/uEzQvXuet0QAAAABJRU5ErkJggg==" /><!-- --></p>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
